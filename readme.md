# Rust Axum Saas Template

**Minimum Required Rust Version: 1.75.0**

*async trait*

This repository contains a Rust Axum-based web application with SQLx, PostgreSQL database, and authentication features for a SaaS template. Follow the steps below to set up and run the project.

## Development Setup

1. **Install sqlx-cli:**
   ```bash
   cargo install sqlx-cli
   ```

2. **Run the Database Setup Script:**
   Execute the following commands in your terminal:
   ```bash
   ./db.sh
   sqlx-cli db setup
   ```

3. **Run the Application:**
   ```bash
   cargo run
   ```

## Building for Production

Ensure that you can successfully run the application in development mode before proceeding.

1. **Run the Build Script:**
   ```bash
   ./build.sh
   ```

2. **Run Docker Compose:**
   ```bash
   docker-compose up
   ```

## Available Routes

- **Home:**
  - Method: `GET`
  - URL: `{{base_url}}/`

- **Login Form:**
  - Method: `GET`
  - URL: `{{base_url}}/login`

- **Login:**
  - Method: `POST`
  - URL: `{{base_url}}/api/auth/login`
  - Body:
    ```json
    {
      "email": "{{email}}",
      "password": "{{password}}"
    }
    ```

- **Protected Resource:**
  - Method: `GET`
  - URL: `{{base_url}}/api/protected`

- **Register:**
  - Method: `POST`
  - URL: `{{base_url}}/api/auth/register`
  - Body:
    ```json
    {
      "username": "haheho",
      "email": "senpai@mail.com",
      "password": "Doplhin123!"
    }
    ```

- **User email verification:**
  - Method: `POST`
  - URL: `{{base_url}}/api/auth/verify-email/:token`

- **Send Reset Password:**
  - Method: `POST`
  - URL: `{{base_url}}/api/auth/reset-password`
  - Body:
    ```json
    {
      "email": "senpai@mail.com"
    }
    ```

- **Verify Reset Password:**
  - Method: `POST`
  - URL: `{{base_url}}/api/auth/reset-password/:token`
  - Body:
    ```json
    {
      "password": "Dolphin123!"
    }
    ```

## Variables

- **base_url:** Set your base URL.
- **email:** Set the email for testing.
- **password:** Set the password for testing.

## Credits

This project is inspired by and incorporates elements from the following repositories:

1. [Realworld Axum SQLx](https://github.com/davidpdrsn/realworld-axum-sqlx) by David Pedersen
2. [Rust Axum Course](https://github.com/jeremychone-channel/rust-axum-course) by Jeremy Chone
3. [Cargo Chef](https://github.com/LukeMathWalker/cargo-chef) by Luke Math Walker
4. [Lucia Auth](https://github.com/lucia-auth/lucia) by pilcrow

A big thank you to the contributors of these projects for their valuable insights and code contributions.
And chat GPT cause all this message generated by it LOL!
